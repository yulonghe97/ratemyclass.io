<script src="/js/popper.min.js"></script>
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<div class="container-fluid">
    <div class="d-flex justify-content-center pt-5">
        <a class="h3"> Add Class </h1>
            <hr>
    </div>
    <div class="row d-flex justify-content-center">
        <div class="col-md-5 mt-3">
            <div class="card">
                {{!-- <div class="card-header">
                    <p class="form-text dark-grey-text">
                        <span class="h5 ml-4">Course Information</span>
                    </p>
                </div> --}}
                <div class="card-body">
                    <form class="needs-validation" method="POST" action="/addClass" novalidate>
                        <div class="form-group">
                            <div class="form-row">
                                <div class="col-md-5 ml-3 p-3">
                                    <!--Select School-->
                                    <select name="courseUniversity" id="selectSchool"
                                        class="mdb-select md-form colorful-select dropdown-primary"
                                        searchable="Search here..." required>
                                        <option value="New York University"
                                            data-icon="https://mir-s3-cdn-cf.behance.net/project_modules/disp/e3ffdb16164203.562a63b1164bb.jpg"
                                            class="rounded-circle">
                                            New York University</option>
                                        <option value="The New School"
                                            data-icon="https://lh3.googleusercontent.com/proxy/KJ4RSmtyZomjGpsnF6Z9RH0fGBs_jCyCxGxVdCAOgNxAluy9yEd8FTi1Xh7zYd1FzJtKDOZ4-b66edEggts8ST9bZIYjzXGBiapWhUeCzo7LvQ3-YD_M_WZMDfYqnD3c_h9ZXfh4H8Ns5i9yPk38fyNIUxrh2bCVMu8"
                                            class="rounded-circle">
                                            The New School</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-md-5 p-3 ml-3">
                                    <div class="md-form mt-3">
                                        <input type="text" class="form-control" placeholder="Course Name"
                                            name="courseName" data-toggle="popover-hover"
                                            data-content="eg. Intro to Computer Science" required>
                                    </div>
                                </div>
                                <div class="col-md-4 p-3 ml-3">
                                    <div class="md-form mt-3">
                                        <input type="text" class="form-control" placeholder="Course Code"
                                            name="courseCode" data-toggle="popover-hover" data-content="eg. CSCI-UA-480"
                                            required>
                                    </div>
                                </div>
                                <div class="col-md-2 p-3 ml-3">
                                    <div class="md-form mt-3">
                                        <input type="text" class="form-control" placeholder="Section"
                                            name="courseSection" data-toggle="popover-hover"
                                            data-content="Class Section. eg. 001" required>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-md-5 p-3 ml-3">
                                    <select class="mdb-select md-form" name="courseSession" multiple required>
                                        <option value="" disabled selected>Session</option>
                                        <option value="Monday">Monday</option>
                                        <option value="Tuesday">Tuesday</option>
                                        <option value="Wednesday">Wednesday</option>
                                        <option value="Thursday">Thursday</option>
                                        <option value="Friday">Friday</option>
                                        <option value="Saturday">Saturday</option>
                                        <option value="Sunday">Sunday</option>
                                    </select>
                                    <button type="button" class="btn-save btn btn-primary btn-sm">Save</button>
                                </div>
                                <div class="col-md-4 p-3">
                                    <select class="mdb-select md-form" name="courseSemester" required>
                                        <option value="" disabled selected>Semester</option>
                                        <option value="Fall">Fall</option>
                                        <option value="Spring">Spring</option>
                                        <option value="Summer">Summer</option>
                                        <option value="Winter">Winter</option>
                                    </select>
                                </div>
                                <div class="col-md-2 p-3 mt-1">
                                    <div class="md-form mt-3">
                                        <input type="text" name="courseUnit" id="courseunit" class="form-control"
                                            placeholder="Units" data-toggle="popover-hover"
                                            data-content="Class Credit. eg. 4" required>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-md-6 p-3 ml-3">
                                    <div class="md-form mt-3">
                                        <input type="text" name="professor" id="classProfessor" class="form-control"
                                            placeholder="Professor" data-toggle="popover-hover"
                                            data-content="Professor: eg. Carlos He" required>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-md-11 p-3 ml-3">
                                    <div class="md-form mt-3">
                                        <input type="text" name="courseWebsite" id="courseWebsite" class="form-control"
                                            placeholder="Course Website (optional)" data-toggle="popover-hover"
                                            data-content="Course Website link">
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-md-11 p-3 ml-2">
                                    <div class="md-form mt-3">
                                        <textarea id="coursePrereq" name="coursePrereq" class="md-textarea form-control"
                                            rows="2" data-toggle="popover-hover"
                                            data-content="Course Prerequisite"></textarea>
                                        <label for="coursePrereq">Course Prerequisite (optional)</label>
                                    </div>
                                </div>
                            </div>
                            <!--EDITOR-->
                            <div class="form-row">
                                <div class="col-md-11 p-3 ml-2">
                                    <div class="quill-textarea"></div>
                                    <textarea style="display: none" id="detail" name="courseDescription"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center mt-5 p-3">
                            <button id="submitBtn" type="submit" class="btn btn-primary btn-rounded">Submit</button>
                        </div>
                </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- MODEL-->
<div class="modal fade" id="classAddedModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-notify modal-success" role="document">
        <!--Content-->
        <div class="modal-content">
            <!--Header-->
            <!--Body-->
            <div class="modal-body">
                <div class="text-center">
                    <i class="fas fa-check fa-4x mb-3 animated rotateIn" style="font-size: 80px;"></i>
                    <p style="font-size: 20px;">Class Added!</p>
                </div>
            </div>
        </div>
        <!--/.Content-->
    </div>
</div>
</div>

<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script>

    // Popover Hover
    $('[data-toggle="popover-hover"]').popover({
        html: true,
        trigger: 'focus',
        placement: 'bottom',
        content: function () { return '<img src="' + $(this).data('img') + '" />'; }
    });


    // form validation
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            var forms = document.getElementsByClassName('needs-validation');
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        $('#submitBtn').text('Submit')
                        event.stopPropagation();
                    } else {
                        $('#classAddedModal').modal('show');
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();

    $(document).ready(function () {
        $('.mdb-select').materialSelect();
    });

    // Check school input

    $('#submitBtn').click(() => {
        $('#classInfoText').text($('#editor'));
        $('#submitBtn').text('loading ').append('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>');
    })

    // Editor
    var quill = new Quill('.quill-textarea', {
        placeholder: 'Class Detail',
        theme: 'snow',
    });

    quill.on('text-change', function (delta, oldDelta, source) {
        console.log(quill.container.firstChild.innerHTML)
        $('#detail').val(quill.container.firstChild.innerHTML);
    });



</script>